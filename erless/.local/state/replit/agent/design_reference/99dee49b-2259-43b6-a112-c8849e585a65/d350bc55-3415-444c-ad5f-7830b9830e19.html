<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Erlessed - Healthcare Claims Processing Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'teal-primary': '#2D7A70',
                        'teal-secondary': '#7DCDC4', 
                        'teal-light': '#E8F6F4',
                        'gray-warm': '#F8FAFA'
                    },
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif']
                    }
                }
            }
        };
    </script>
</head>
<body class="font-inter bg-gray-warm min-h-screen">
    <!-- @COMPONENT: AppContainer -->
    <div id="app-container" class="min-h-screen">
        
        <!-- Login Screen -->
        <!-- @COMPONENT: LoginScreen [role detection, domain auth] -->
        <div id="login-screen" class="min-h-screen bg-gradient-to-br from-teal-light to-white flex items-center justify-center p-6">
            <div class="max-w-md w-full">
                <!-- Logo Section -->
                <div class="text-center mb-8">
                    <div class="inline-flex items-center justify-center w-16 h-16 bg-teal-primary rounded-xl mb-4">
                        <i class="fas fa-plus text-white text-2xl"></i>
                    </div>
                    <h1 class="text-3xl font-bold text-teal-primary mb-2">Erlessed</h1>
                    <p class="text-sm text-gray-600">powered by <span class="font-semibold text-gray-900">Aboolean</span></p>
                </div>

                <!-- Login Card -->
                <div class="bg-white rounded-2xl shadow-xl p-8">
                    <div class="mb-6">
                        <h2 class="text-xl font-semibold text-gray-900 mb-2">Healthcare Claims Portal</h2>
                        <p class="text-gray-600 text-sm">Sign in with your healthcare provider credentials</p>
                    </div>

                    <form data-event="submit:handleLogin">
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Email Address</label>
                                <input type="email" data-bind="user.email" placeholder="doctor@hospital.com" 
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-primary focus:border-transparent outline-none transition-all">
                                <p class="text-xs text-gray-500 mt-1">Your role will be detected automatically</p>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                                <input type="password" data-bind="user.password" placeholder="Enter your password"
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-primary focus:border-transparent outline-none transition-all">
                            </div>
                        </div>

                        <button type="submit" class="w-full bg-teal-primary text-white py-3 rounded-lg font-medium mt-6 hover:bg-teal-700 transition-colors">
                            Sign In to Dashboard
                        </button>
                    </form>

                    <!-- Role Indicators -->
                    <div class="mt-6 p-4 bg-teal-light rounded-lg">
                        <p class="text-xs font-medium text-teal-primary mb-2">Supported Roles:</p>
                        <div class="flex flex-wrap gap-2">
                            <span class="px-2 py-1 bg-white text-xs rounded text-teal-primary">Front Office</span>
                            <span class="px-2 py-1 bg-white text-xs rounded text-teal-primary">Doctor</span>
                            <span class="px-2 py-1 bg-white text-xs rounded text-teal-primary">Lab</span>
                            <span class="px-2 py-1 bg-white text-xs rounded text-teal-primary">Pharmacy</span>
                            <span class="px-2 py-1 bg-white text-xs rounded text-teal-primary">Debtors</span>
                            <span class="px-2 py-1 bg-white text-xs rounded text-teal-primary">Care Manager</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- @END_COMPONENT: LoginScreen -->

        <!-- Main Dashboard -->
        <!-- @COMPONENT: MainDashboard [role-based layout] -->
        <div id="main-dashboard" class="hidden min-h-screen bg-gray-warm">
            
            <!-- Header -->
            <!-- @COMPONENT: Header [user info, notifications] -->
            <header class="bg-white border-b border-gray-200 px-6 py-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 bg-teal-primary rounded-lg flex items-center justify-center">
                                <i class="fas fa-plus text-white text-sm"></i>
                            </div>
                            <div>
                                <h1 class="text-lg font-semibold text-gray-900">Erlessed</h1>
                                <p class="text-xs text-gray-500">powered by Aboolean</p>
                            </div>
                        </div>
                        <div class="h-6 w-px bg-gray-300"></div>
                        <div>
                            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-teal-light text-teal-primary">
                                <i class="fas fa-user-md mr-1"></i>
                                <span data-bind="user.role">Doctor Portal</span>
                            </span>
                        </div>
                    </div>

                    <div class="flex items-center space-x-4">
                        <button class="relative p-2 text-gray-600 hover:text-teal-primary transition-colors">
                            <i class="fas fa-bell text-lg"></i>
                            <span class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"></span>
                        </button>
                        <div class="flex items-center space-x-3">
                            <div class="text-right">
                                <p class="text-sm font-medium text-gray-900" data-bind="user.name">Dr. Sarah Johnson</p>
                                <p class="text-xs text-gray-500" data-bind="user.hospital">General Hospital</p>
                            </div>
                            <div class="w-8 h-8 bg-teal-secondary rounded-full flex items-center justify-center">
                                <span class="text-teal-primary font-semibold text-sm">SJ</span>
                            </div>
                        </div>
                    </div>
                </div>
            </header>
            <!-- @END_COMPONENT: Header -->

            <div class="flex h-[calc(100vh-80px)]">
                
                <!-- Sidebar Navigation -->
                <!-- @COMPONENT: Sidebar [role-based menu] -->
                <aside class="w-64 bg-white border-r border-gray-200 overflow-y-auto">
                    <nav class="p-4 space-y-2">
                        <div class="mb-6">
                            <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">Patient Care</h3>
                            <ul class="space-y-1">
                                <li>
                                    <a href="#" class="flex items-center px-3 py-2 text-sm font-medium text-teal-primary bg-teal-light rounded-lg">
                                        <i class="fas fa-fingerprint mr-3"></i>
                                        Patient Verification
                                    </a>
                                </li>
                                <li>
                                    <a href="#" class="flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg">
                                        <i class="fas fa-file-medical mr-3"></i>
                                        Claim Processing
                                    </a>
                                </li>
                                <li>
                                    <a href="#" class="flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg">
                                        <i class="fas fa-pills mr-3"></i>
                                        Pharmacy Orders
                                    </a>
                                </li>
                            </ul>
                        </div>

                        <div class="mb-6">
                            <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">Analytics</h3>
                            <ul class="space-y-1">
                                <li>
                                    <a href="#" class="flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg">
                                        <i class="fas fa-chart-bar mr-3"></i>
                                        Claims Dashboard
                                    </a>
                                </li>
                                <li>
                                    <a href="#" class="flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg">
                                        <i class="fas fa-shield-alt mr-3"></i>
                                        Fraud Detection
                                    </a>
                                </li>
                            </ul>
                        </div>

                        <div class="mb-6">
                            <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">Administration</h3>
                            <ul class="space-y-1">
                                <li>
                                    <a href="#" class="flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg">
                                        <i class="fas fa-users mr-3"></i>
                                        Patient Database
                                    </a>
                                </li>
                                <li>
                                    <a href="#" class="flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg">
                                        <i class="fas fa-cog mr-3"></i>
                                        Settings
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </nav>

                    <!-- Blockchain Status -->
                    <div class="p-4 border-t border-gray-200">
                        <div class="bg-teal-light p-3 rounded-lg">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-xs font-medium text-teal-primary">Blockchain Status</span>
                                <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                            </div>
                            <p class="text-xs text-gray-600">Connected to Sepolia</p>
                        </div>
                    </div>
                </aside>
                <!-- @END_COMPONENT: Sidebar -->

                <!-- Main Content Area -->
                <main class="flex-1 overflow-y-auto p-6">
                    
                    <!-- Patient Verification Section -->
                    <!-- @COMPONENT: PatientVerification [biometric/OTP] -->
                    <div class="mb-8">
                        <div class="mb-6">
                            <h2 class="text-2xl font-bold text-gray-900 mb-2">Patient Verification</h2>
                            <p class="text-gray-600">Verify patient identity using biometric or OTP authentication</p>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                            <!-- Biometric Verification -->
                            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="text-lg font-semibold text-gray-900">Biometric Verification</h3>
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                        Recommended
                                    </span>
                                </div>

                                <div class="text-center py-8">
                                    <div class="w-24 h-24 bg-teal-light rounded-full flex items-center justify-center mx-auto mb-4">
                                        <i class="fas fa-fingerprint text-teal-primary text-3xl"></i>
                                    </div>
                                    <p class="text-gray-600 mb-4">Place finger on scanner</p>
                                    <button class="bg-teal-primary text-white px-6 py-2 rounded-lg font-medium hover:bg-teal-700 transition-colors" 
                                            data-event="click:startBiometricScan">
                                        Start Biometric Scan
                                    </button>
                                </div>

                                <!-- @STATE: scanningInProgress:boolean = false -->
                                <div class="hidden" id="scanning-progress">
                                    <div class="flex items-center justify-center py-4">
                                        <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-teal-primary"></div>
                                        <span class="ml-3 text-sm text-gray-600">Scanning fingerprint...</span>
                                    </div>
                                </div>
                            </div>

                            <!-- OTP Verification -->
                            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                                <div class="flex items-center justify-between mb-4">
                                    <h3 class="text-lg font-semibold text-gray-900">OTP Verification</h3>
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                                        Alternative
                                    </span>
                                </div>

                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Patient Phone Number</label>
                                        <input type="tel" placeholder="+1 (555) 123-4567" 
                                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-primary focus:border-transparent outline-none">
                                    </div>
                                    
                                    <button class="w-full bg-gray-100 text-gray-700 py-3 rounded-lg font-medium hover:bg-gray-200 transition-colors"
                                            data-event="click:sendOTP">
                                        Send OTP Code
                                    </button>

                                    <div class="space-y-2">
                                        <label class="block text-sm font-medium text-gray-700">Enter OTP Code</label>
                                        <div class="flex space-x-2">
                                            <input type="text" maxlength="1" class="w-12 h-12 text-center border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-primary focus:border-transparent outline-none">
                                            <input type="text" maxlength="1" class="w-12 h-12 text-center border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-primary focus:border-transparent outline-none">
                                            <input type="text" maxlength="1" class="w-12 h-12 text-center border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-primary focus:border-transparent outline-none">
                                            <input type="text" maxlength="1" class="w-12 h-12 text-center border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-primary focus:border-transparent outline-none">
                                            <input type="text" maxlength="1" class="w-12 h-12 text-center border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-primary focus:border-transparent outline-none">
                                            <input type="text" maxlength="1" class="w-12 h-12 text-center border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-primary focus:border-transparent outline-none">
                                        </div>
                                    </div>

                                    <button class="w-full bg-teal-primary text-white py-3 rounded-lg font-medium hover:bg-teal-700 transition-colors"
                                            data-event="click:verifyOTP">
                                        Verify Patient
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- @END_COMPONENT: PatientVerification -->

                    <!-- Patient Information Display (After Verification) -->
                    <!-- @COMPONENT: PatientInfo [auto-populated biodata] -->
                    <div class="mb-8">
                        <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
                            <div class="bg-green-50 border-b border-green-200 px-6 py-4">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center">
                                            <i class="fas fa-check text-white text-sm"></i>
                                        </div>
                                        <div>
                                            <h3 class="font-semibold text-green-800">Patient Verified Successfully</h3>
                                            <p class="text-sm text-green-600">Biodata automatically populated</p>
                                        </div>
                                    </div>
                                    <span class="text-sm text-green-600 font-mono">ID: PT-2024-001</span>
                                </div>
                            </div>

                            <div class="p-6">
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                    <div class="space-y-4">
                                        <h4 class="font-semibold text-gray-900">Patient Information</h4>
                                        <div class="space-y-2">
                                            <div>
                                                <span class="text-sm text-gray-500">Full Name</span>
                                                <p class="font-medium" data-bind="patient.name">Michael Chen</p>
                                            </div>
                                            <div>
                                                <span class="text-sm text-gray-500">Date of Birth</span>
                                                <p class="font-medium" data-bind="patient.dob">March 15, 1985</p>
                                            </div>
                                            <div>
                                                <span class="text-sm text-gray-500">Gender</span>
                                                <p class="font-medium" data-bind="patient.gender">Male</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="space-y-4">
                                        <h4 class="font-semibold text-gray-900">Insurance Details</h4>
                                        <div class="space-y-2">
                                            <div>
                                                <span class="text-sm text-gray-500">Policy Number</span>
                                                <p class="font-medium font-mono" data-bind="patient.policyNumber">INS-789456123</p>
                                            </div>
                                            <div>
                                                <span class="text-sm text-gray-500">Provider</span>
                                                <p class="font-medium" data-bind="patient.insurer">HealthFirst Insurance</p>
                                            </div>
                                            <div>
                                                <span class="text-sm text-gray-500">Coverage Type</span>
                                                <p class="font-medium" data-bind="patient.coverageType">Family Premium</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="space-y-4">
                                        <h4 class="font-semibold text-gray-900">Benefit Status</h4>
                                        <div class="space-y-2">
                                            <div class="flex justify-between">
                                                <span class="text-sm text-gray-500">Annual Limit</span>
                                                <span class="font-medium text-green-600">$50,000</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span class="text-sm text-gray-500">Used</span>
                                                <span class="font-medium">$12,450</span>
                                            </div>
                                            <div class="flex justify-between">
                                                <span class="text-sm text-gray-500">Remaining</span>
                                                <span class="font-medium text-teal-primary">$37,550</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Dependents Section -->
                                <div class="mt-6 pt-6 border-t border-gray-200">
                                    <h4 class="font-semibold text-gray-900 mb-4">Covered Dependents</h4>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <!-- @MAP: dependents.map(dependent => ( -->
                                        <div class="border border-gray-200 rounded-lg p-4">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <p class="font-medium" data-bind="dependent.name">Sarah Chen</p>
                                                    <p class="text-sm text-gray-500" data-bind="dependent.relationship">Spouse</p>
                                                </div>
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                    Active
                                                </span>
                                            </div>
                                        </div>
                                        <!-- @END_MAP )) -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- @END_COMPONENT: PatientInfo -->

                    <!-- Dynamic Claim Form -->
                    <!-- @COMPONENT: ClaimForm [real-time billing, auto-service detection] -->
                    <div class="mb-8">
                        <div class="bg-white rounded-xl shadow-sm border border-gray-200">
                            <div class="border-b border-gray-200 px-6 py-4">
                                <h3 class="text-lg font-semibold text-gray-900">New Claim Processing</h3>
                                <p class="text-sm text-gray-600">Real-time billing with automatic service detection</p>
                            </div>

                            <div class="p-6">
                                <form class="space-y-6" data-event="submit:processClaim">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <!-- Service Selection -->
                                        <div class="space-y-4">
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Service Type</label>
                                                <select class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-primary focus:border-transparent outline-none"
                                                        data-event="change:autoDetectService">
                                                    <option value="">Select Service Type</option>
                                                    <option value="consultation">Consultation</option>
                                                    <option value="diagnostic">Diagnostic Test</option>
                                                    <option value="procedure">Medical Procedure</option>
                                                    <option value="medication">Medication</option>
                                                    <option value="emergency">Emergency Care</option>
                                                </select>
                                            </div>

                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Diagnosis Code (ICD-10)</label>
                                                <div class="relative">
                                                    <input type="text" placeholder="Enter or search diagnosis code" 
                                                           class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-primary focus:border-transparent outline-none">
                                                    <button type="button" class="absolute right-3 top-3 text-gray-400 hover:text-teal-primary">
                                                        <i class="fas fa-search"></i>
                                                    </button>
                                                </div>
                                                <!-- AI Suggestion -->
                                                <div class="mt-2 p-3 bg-blue-50 rounded-lg border border-blue-200">
                                                    <div class="flex items-start space-x-2">
                                                        <i class="fas fa-robot text-blue-600 mt-0.5"></i>
                                                        <div>
                                                            <p class="text-sm font-medium text-blue-800">AI Suggestion</p>
                                                            <p class="text-sm text-blue-600">Based on symptoms: M25.511 - Pain in right shoulder</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Treatment Details</label>
                                                <textarea rows="3" placeholder="Describe treatment provided..." 
                                                          class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-primary focus:border-transparent outline-none resize-none"></textarea>
                                            </div>
                                        </div>

                                        <!-- Billing Information -->
                                        <div class="space-y-4">
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Service Date</label>
                                                <input type="date" value="2024-01-15" 
                                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-primary focus:border-transparent outline-none">
                                            </div>

                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Provider</label>
                                                <select class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-primary focus:border-transparent outline-none">
                                                    <option value="dr-johnson">Dr. Sarah Johnson (Current)</option>
                                                    <option value="dr-smith">Dr. Michael Smith</option>
                                                    <option value="dr-williams">Dr. Emily Williams</option>
                                                </select>
                                            </div>

                                            <!-- Real-time Billing Display -->
                                            <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                                                <h4 class="font-semibold text-gray-900 mb-3">Billing Summary</h4>
                                                <div class="space-y-2">
                                                    <div class="flex justify-between">
                                                        <span class="text-sm text-gray-600">Service Charge</span>
                                                        <span class="font-medium" data-bind="billing.serviceCharge">$150.00</span>
                                                    </div>
                                                    <div class="flex justify-between">
                                                        <span class="text-sm text-gray-600">Insurance Coverage</span>
                                                        <span class="font-medium text-green-600" data-bind="billing.coverage">$120.00</span>
                                                    </div>
                                                    <div class="flex justify-between border-t border-gray-300 pt-2">
                                                        <span class="font-semibold text-gray-900">Patient Responsibility</span>
                                                        <span class="font-semibold text-teal-primary" data-bind="billing.patientCost">$30.00</span>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Preauthorization Status -->
                                            <div class="border border-amber-200 rounded-lg p-4 bg-amber-50">
                                                <div class="flex items-center space-x-2">
                                                    <i class="fas fa-exclamation-triangle text-amber-600"></i>
                                                    <span class="font-medium text-amber-800">Preauthorization Required</span>
                                                </div>
                                                <p class="text-sm text-amber-700 mt-1">This service requires preauth before processing</p>
                                                <button type="button" class="mt-2 bg-amber-100 text-amber-800 px-3 py-1 rounded text-sm hover:bg-amber-200 transition-colors">
                                                    Request Preauth
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Pharmacy Integration Section -->
                                    <div class="border-t border-gray-200 pt-6">
                                        <h4 class="font-semibold text-gray-900 mb-4">Medication Orders</h4>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Medication</label>
                                                <input type="text" placeholder="Search medication..." 
                                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-primary focus:border-transparent outline-none">
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-2">Dosage</label>
                                                <input type="text" placeholder="mg/ml" 
                                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-primary focus:border-transparent outline-none">
                                            </div>
                                        </div>

                                        <!-- Pharmacy Validation Alerts -->
                                        <div class="mt-4 space-y-2">
                                            <div class="flex items-center space-x-2 text-sm text-green-600">
                                                <i class="fas fa-check-circle"></i>
                                                <span>✓ Dosage appropriate for patient weight (72kg)</span>
                                            </div>
                                            <div class="flex items-center space-x-2 text-sm text-green-600">
                                                <i class="fas fa-check-circle"></i>
                                                <span>✓ No gender-specific contraindications</span>
                                            </div>
                                            <div class="flex items-center space-x-2 text-sm text-green-600">
                                                <i class="fas fa-check-circle"></i>
                                                <span>✓ Covered under chronic condition benefits</span>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Submit Actions -->
                                    <div class="border-t border-gray-200 pt-6">
                                        <div class="flex items-center justify-between">
                                            <div class="flex items-center space-x-3">
                                                <button type="button" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors">
                                                    Save Draft
                                                </button>
                                                <button type="button" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors">
                                                    Preview Claim
                                                </button>
                                            </div>
                                            <div class="flex items-center space-x-3">
                                                <span class="text-sm text-gray-500">Requires fingerprint approval</span>
                                                <button type="submit" class="bg-teal-primary text-white px-6 py-2 rounded-lg font-medium hover:bg-teal-700 transition-colors flex items-center space-x-2">
                                                    <i class="fas fa-fingerprint"></i>
                                                    <span>Submit Claim</span>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <!-- @END_COMPONENT: ClaimForm -->

                    <!-- Care Manager Dashboard Section -->
                    <!-- @COMPONENT: CareManagerDashboard [claims overview, fraud detection] -->
                    <div class="mb-8">
                        <div class="mb-6">
                            <h2 class="text-2xl font-bold text-gray-900 mb-2">Care Manager Dashboard</h2>
                            <p class="text-gray-600">Monitor claims, detect fraud patterns, and track outcomes</p>
                        </div>

                        <!-- Summary Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm text-gray-600">Total Claims</p>
                                        <p class="text-2xl font-bold text-gray-900" data-bind="dashboard.totalClaims">1,247</p>
                                    </div>
                                    <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-file-medical text-blue-600"></i>
                                    </div>
                                </div>
                                <div class="mt-4 flex items-center">
                                    <span class="text-sm text-green-600">↗ 12% increase</span>
                                </div>
                            </div>

                            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm text-gray-600">Processed Amount</p>
                                        <p class="text-2xl font-bold text-gray-900" data-bind="dashboard.processedAmount">$2.4M</p>
                                    </div>
                                    <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-dollar-sign text-green-600"></i>
                                    </div>
                                </div>
                                <div class="mt-4 flex items-center">
                                    <span class="text-sm text-green-600">↗ 8% increase</span>
                                </div>
                            </div>

                            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm text-gray-600">Fraud Alerts</p>
                                        <p class="text-2xl font-bold text-red-600" data-bind="dashboard.fraudAlerts">23</p>
                                    </div>
                                    <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-exclamation-triangle text-red-600"></i>
                                    </div>
                                </div>
                                <div class="mt-4 flex items-center">
                                    <span class="text-sm text-red-600">Needs Review</span>
                                </div>
                            </div>

                            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm text-gray-600">Success Rate</p>
                                        <p class="text-2xl font-bold text-gray-900" data-bind="dashboard.successRate">94.2%</p>
                                    </div>
                                    <div class="w-12 h-12 bg-teal-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-chart-line text-teal-600"></i>
                                    </div>
                                </div>
                                <div class="mt-4 flex items-center">
                                    <span class="text-sm text-teal-600">Above target</span>
                                </div>
                            </div>
                        </div>

                        <!-- Claims Table -->
                        <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
                            <div class="border-b border-gray-200 px-6 py-4">
                                <div class="flex items-center justify-between">
                                    <h3 class="text-lg font-semibold text-gray-900">Recent Claims Activity</h3>
                                    <div class="flex items-center space-x-3">
                                        <select class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                                            <option>All Providers</option>
                                            <option>Dr. Johnson</option>
                                            <option>Dr. Smith</option>
                                        </select>
                                        <button class="bg-teal-primary text-white px-4 py-2 rounded-lg text-sm hover:bg-teal-700 transition-colors">
                                            Export Report
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Claim ID</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Patient</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Provider</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Service</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Amount</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody class="bg-white divide-y divide-gray-200">
                                        <!-- @MAP: claims.map(claim => ( -->
                                        <tr class="hover:bg-gray-50">
                                            <td class="px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-900" data-bind="claim.id">CLM-2024-0001</td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="text-sm font-medium text-gray-900" data-bind="claim.patient.name">Michael Chen</div>
                                                <div class="text-sm text-gray-500" data-bind="claim.patient.id">PT-2024-001</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900" data-bind="claim.provider">Dr. Sarah Johnson</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900" data-bind="claim.service">Consultation</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900" data-bind="claim.amount">$150.00</td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                    Processed
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                                <button class="text-teal-primary hover:text-teal-700">View</button>
                                            </td>
                                        </tr>
                                        <!-- @END_MAP )) -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <!-- @END_COMPONENT: CareManagerDashboard -->

                </main>
            </div>
        </div>
        <!-- @END_COMPONENT: MainDashboard -->

    </div>
    <!-- @END_COMPONENT: AppContainer -->

    <script>
        (function() {
            // Application state management
            const appState = {
                currentView: 'login',
                user: null,
                patient: null,
                isScanning: false
            };

            // Mock authentication
            function handleLogin(event) {
                event.preventDefault();
                const email = event.target.querySelector('input[type="email"]').value;
                
                // Mock role detection based on email domain
                let role = 'doctor';
                if (email.includes('admin')) role = 'care-manager';
                else if (email.includes('nurse')) role = 'front-office';
                else if (email.includes('lab')) role = 'lab';
                else if (email.includes('pharmacy')) role = 'pharmacy';
                else if (email.includes('billing')) role = 'debtors';

                appState.user = {
                    email: email,
                    role: role,
                    name: 'Dr. Sarah Johnson',
                    hospital: 'General Hospital'
                };

                showDashboard();
            }

            // Show main dashboard
            function showDashboard() {
                document.getElementById('login-screen').classList.add('hidden');
                document.getElementById('main-dashboard').classList.remove('hidden');
            }

            // Biometric scanning simulation
            function startBiometricScan() {
                const scanButton = event.target;
                const progressDiv = document.getElementById('scanning-progress');
                
                appState.isScanning = true;
                scanButton.disabled = true;
                scanButton.textContent = 'Scanning...';
                progressDiv.classList.remove('hidden');

                // Simulate scan completion after 3 seconds
                setTimeout(() => {
                    appState.isScanning = false;
                    scanButton.disabled = false;
                    scanButton.textContent = 'Scan Complete';
                    scanButton.classList.add('bg-green-600');
                    progressDiv.classList.add('hidden');
                    
                    // Show success message
                    showPatientVerificationSuccess();
                }, 3000);
            }

            // Patient verification success
            function showPatientVerificationSuccess() {
                // Mock patient data
                appState.patient = {
                    id: 'PT-2024-001',
                    name: 'Michael Chen',
                    dob: 'March 15, 1985',
                    gender: 'Male',
                    policyNumber: 'INS-789456123',
                    insurer: 'HealthFirst Insurance',
                    coverageType: 'Family Premium'
                };

                // Update UI with patient data
                console.log('Patient verified successfully:', appState.patient);
            }

            // Auto-detect service type
            function autoDetectService(event) {
                const serviceType = event.target.value;
                console.log('Auto-detecting billing for:', serviceType);
                
                // Mock billing calculation
                const billing = {
                    consultation: { service: 150, coverage: 120, patient: 30 },
                    diagnostic: { service: 300, coverage: 240, patient: 60 },
                    procedure: { service: 800, coverage: 600, patient: 200 },
                    medication: { service: 85, coverage: 68, patient: 17 },
                    emergency: { service: 1200, coverage: 960, patient: 240 }
                };

                if (billing[serviceType]) {
                    updateBillingSummary(billing[serviceType]);
                }
            }

            // Update billing summary
            function updateBillingSummary(amounts) {
                const elements = {
                    serviceCharge: document.querySelector('[data-bind="billing.serviceCharge"]'),
                    coverage: document.querySelector('[data-bind="billing.coverage"]'),
                    patientCost: document.querySelector('[data-bind="billing.patientCost"]')
                };

                if (elements.serviceCharge) elements.serviceCharge.textContent = `$${amounts.service}.00`;
                if (elements.coverage) elements.coverage.textContent = `$${amounts.coverage}.00`;
                if (elements.patientCost) elements.patientCost.textContent = `$${amounts.patient}.00`;
            }

            // Process claim submission
            function processClaim(event) {
                event.preventDefault();
                console.log('Processing claim...');
                
                // Mock blockchain anchoring
                setTimeout(() => {
                    alert('Claim submitted successfully and anchored to blockchain (Sepolia testnet)');
                }, 1000);
            }

            // Event listeners
            document.addEventListener('DOMContentLoaded', function() {
                // Bind form submissions
                const loginForm = document.querySelector('form[data-event="submit:handleLogin"]');
                if (loginForm) {
                    loginForm.addEventListener('submit', handleLogin);
                }

                // Bind biometric scan
                const biometricBtn = document.querySelector('[data-event="click:startBiometricScan"]');
                if (biometricBtn) {
                    biometricBtn.addEventListener('click', startBiometricScan);
                }

                // Bind service selection
                const serviceSelect = document.querySelector('[data-event="change:autoDetectService"]');
                if (serviceSelect) {
                    serviceSelect.addEventListener('change', autoDetectService);
                }

                // Bind claim form
                const claimForm = document.querySelector('form[data-event="submit:processClaim"]');
                if (claimForm) {
                    claimForm.addEventListener('submit', processClaim);
                }

                // OTP input auto-focus
                const otpInputs = document.querySelectorAll('input[maxlength="1"]');
                otpInputs.forEach((input, index) => {
                    input.addEventListener('input', function() {
                        if (this.value.length === 1 && index < otpInputs.length - 1) {
                            otpInputs[index + 1].focus();
                        }
                    });
                    
                    input.addEventListener('keydown', function(e) {
                        if (e.key === 'Backspace' && this.value === '' && index > 0) {
                            otpInputs[index - 1].focus();
                        }
                    });
                });
            });

            // Expose functions globally for inline event handlers
            window.handleLogin = handleLogin;
            window.startBiometricScan = startBiometricScan;
            window.autoDetectService = autoDetectService;
            window.processClaim = processClaim;
        })();
    </script>
</body>
</html>